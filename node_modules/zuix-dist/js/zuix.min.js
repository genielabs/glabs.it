/* ZUIX v0.4.9-23 17.06.22 23:28:43 */

'use strict';!function(L){if("object"==typeof exports)module.exports=L();else if("function"==typeof define&&define.amd)define(L);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self);n.zuix=L()}}(function(){return function n(q,u,b){function k(a,d){if(!u[a]){if(!q[a]){var c="function"==typeof require&&require;if(!d&&c)return c(a,!0);if(g)return g(a,!0);throw Error("Cannot find module '"+a+"'");}c=u[a]={exports:{}};q[a][0].call(c.exports,
function(b){var d=q[a][1][b];return k(d?d:b)},c,c.exports,n,q,u,b)}return u[a].exports}for(var g="function"==typeof require&&require,c=0;c<b.length;c++)k(b[c]);return k}({1:[function(n,q,u){function b(a){h=a}function k(){null!=f&&(cancelAnimationFrame(f),f=null);d++;if(d<a.length&&!h.willBreak())return c(),!0;(d>=a.length||h.willBreak())&&g();return!1}function g(b){d=-1;a.length=0;a=[];h.status(null!=b?b:"done")}function c(){var b=a[d];if(null==b)return!1;var c=function(){null!=f&&(cancelAnimationFrame(f),
f=null);h.doWork(b.item,function(){f=requestAnimationFrame(k)})||k()};if(b.cancelable)if(h.willBreak())g("stopped");else if(null==f)f=requestAnimationFrame(c);else return!1;else c();return!0}b.prototype.isReady=function(){return 0==a.length||-1==d};b.prototype.getJobs=function(){return a};b.prototype.setJobs=function(b){0<a.length?(d=-1,a.length=0):(a=b.slice(),h.status("start",a),k())};b.prototype.append=function(b){this.isReady()?this.setJobs(b):Array.prototype.push.apply(a,b)};var a=[],d=-1,h=
null,f=null;q.exports=function(a){return new b(a)}},{}],2:[function(n,q,u){function b(b){k=window?window.console:{};g=window?window:{};this._timers={};this.args=function(a,b,c){a="%c "+b+" %c"+(new Date).toISOString()+" %c"+a;b=["background-color:rgba(200,200,200,0.2);color:#8a53ff;","background-color:rgba(200,200,200,0.2);color:#777777","background-color:rgba(200,200,200,0.2);color:#888888;"];for(var d=0;d<c.length;d++)if("string"==typeof c[d]&&0==c[d].indexOf("timer:")){var e=c[d].split(":");if(3==
e.length)switch(e[2]){case "start":this._timers[e[1]]=(new Date).getTime();a+=" %cSTART "+e[1];b.push("background-color:rgba(200,200,200,0.2);color:#999900;");break;case "stop":var C=(new Date).getTime()-this._timers[e[1]];a+=" %cSTOP "+e[1]+" "+C+" ms";200<C?b.push("background-color:rgba(200,200,200,0.2);color:#ff0000;"):100<C?b.push("background-color:rgba(200,200,200,0.2);color:#ff7700;"):b.push("background-color:rgba(200,200,200,0.2);color:#00aa00;")}}a+=" \n%c ";b.push("background-color:transparent;color:inherit;");
for(d=b.length-1;0<=d;d--)Array.prototype.unshift.call(c,b[d]);Array.prototype.unshift.call(c,a);Array.prototype.push.call(c,"\n\n")};this.log=function(c,f){"function"===typeof a&&a.call(b,c,f);g.zuixNoConsoleOutput||(this.args(b,c,f),k.log.apply(k,f))}}var k=null,g=null,c="log info warn error debug trace dir group groupCollapsed groupEnd time timeEnd profile profileEnd dirxml assert count markTimeline timeStamp clear".split(" "),a=null;b.prototype.monitor=function(b){a=b};b.prototype.console=function(a){if(a)window.console=
k;else for(window.console={},a=0;a<c.length;a++)window.console[c[a]]||(window.console[c[a]]=function(){})};b.prototype.i=b.prototype.info=b.prototype.l=b.prototype.log=function(){this.log("INFO",arguments);return this};b.prototype.w=b.prototype.warn=function(){this.log("WARN",arguments);return this};b.prototype.e=b.prototype.error=function(){this.log("ERROR",arguments);return this};b.prototype.d=b.prototype.debug=function(){this.log("DEBUG",arguments);return this};b.prototype.t=b.prototype.trace=
function(){this.log("TRACE",arguments);return this};q.exports=function(a){return new b(a)}},{}],3:[function(n,q,u){function b(b){var c=this;c._worker=null;c._taskList=[];c._requests=[];null==b&&(b=function(){});c.taskQueue=function(a,d,h){c._taskList.push({tid:a,fn:d,status:0,priority:h,step:function(a){k.t(a,"load:step");b(c,"load:step",{task:a})},end:function(){this.status=2;k.t(this.tid,"load:next","timer:task:stop");b(c,"load:next",{task:this.tid});c._taskList.splice(this.index,1);c.taskCheck();
null!=this._callback&&this._callback.call(this)},callback:function(a){this._callback=a}});k.t(a,"task added",h,"priority");c._taskList.sort(function(a,b){return a.priority>b.priority?1:b.priority>a.priority?-1:0});c.taskCheck()};c.taskCheck=function(){for(var a=0;a<c._taskList.length;a++){if(0==c._taskList[a].status){c._taskList[a].status=1;k.t(c._taskList[a].tid,"load:begin","timer:task:start");b(c,"load:begin",{task:c._taskList[a].tid});c._taskList[a].index=a;c._taskList[a].fn.call(c._taskList[a]);
return}if(1==c._taskList[a].status||2==c._taskList[a].status)return}k.t("load:end");b(c,"load:end")}}var k=n("./Logger")("TaskQueue.js");b.prototype.queue=function(b,c,a){return this.taskQueue(b,c,a)};q.exports=b},{"./Logger":2}],4:[function(n,q,u){q.exports={isIE:function(){return 0<window.navigator.userAgent.indexOf("Trident")},isNoU:function(b){return"undefined"===typeof b||null===b},isFunction:function(b){return"function"===typeof b},objectEquals:function(b,k){if(null===b||void 0===b||null===
k||void 0===k)return b===k;if(b.constructor!==k.constructor)return!1;if(b instanceof Function||b instanceof RegExp)return b===k;if(b===k||b.valueOf()===k.valueOf())return!0;if(Array.isArray(b)&&b.length!==k.length||b instanceof Date||!(b instanceof Object)||!(k instanceof Object))return!1;var g=Object.keys(b);return Object.keys(k).every(function(b){return-1!==g.indexOf(b)})&&g.every(function(c){return util.objectEquals(b[c],k[c])})},propertyFromPath:function(b,k){if("string"===typeof k){k=k.replace(/\[(\w+)]/g,
".$1");k=k.replace(/^\./,"");for(var g=k.split("."),c=b,a=0,d=g.length;a<d;++a){var h=g[a];if("undefined"!==typeof c[h])c=c[h];else return}return c}},cloneObject:function k(g){if(null===g||"object"!==typeof g)return g;var c=g;try{var c=g.constructor(),a;for(a in g)c[a]=k(g[a])}catch(d){}return c}}},{}],5:[function(n,q,u){function b(e){c(this,e.type,e)}function k(e,a,c){var d=!1;l.each(m,function(){if(this.element===e&&this.path===a&&this.handler==c)return h.w("Handler already registered",e,a,c),d=
!0,!1});d||(m.push({element:e,path:a,handler:c}),e.addEventListener(a,b,!1))}function g(e,a,c){var d=1,r=-1;l.each(m,function(b){this.element===e&&this.path===a&&this.handler==c&&(d--,r=b)});-1!==r&&m.splice(r,1);0==d&&e.removeEventListener(a,b)}function c(e,a,b){var c=l(e);l.each(m,function(){this.element===e&&this.path===a&&this.handler.call(c,b)})}function a(e){l.each(m,function(){this.element===e&&(h.t("Removing event handler",this.element,this.path,this.handler),g(this.element,this.path,this.handler))})}
function d(e){this._selection=[];"undefined"===typeof e&&(e=document.documentElement);if(e instanceof d)return e;if(e instanceof HTMLCollection||e instanceof NodeList||Array.isArray(e))this._selection=e;else if(e instanceof HTMLElement||e instanceof Node)this._selection=[e];else if("string"===typeof e)this._selection=document.documentElement.querySelectorAll(e);else if(null!==e)throw h.e("ZxQuery cannot wrap object of this type.",typeof e,e),Error(),e;return this}var h=n("./Logger")("TaskQueue.js"),
f=n("./Util.js"),m=[];d.prototype.length=function(){return this._selection.length};d.prototype.parent=function(e){return f.isNoU(e)?new d(this._selection[0].parentNode):new d(l.getClosest(this._selection[0],e))};d.prototype.children=function(e){return f.isNoU(e)?new d(this._selection[0].children):new d(this._selection[0].querySelectorAll(e))};d.prototype.reverse=function(){this._selection=Array.prototype.slice.call(this._selection,0).reverse();return this};d.prototype.get=function(e){f.isNoU(e)&&
(e=0);return this._selection[e]};d.prototype.eq=function(e){var a=this._selection,b=a[e];1<arguments.length&&(b=[],l.each(arguments,function(e,c){null!=a[c]&&b.push(a[c])}));return new d(b)};d.prototype.find=function(e){return new d(this._selection[0].querySelectorAll(e))};d.prototype.each=function(e){l.each(this._selection,e);return this};d.prototype.attr=function(e,a){var b=this;if("object"===typeof e)l.each(e,function(e,a){b.each(function(b,c){c.setAttribute(e,a)})});else{if("undefined"==typeof a)return this._selection[0].getAttribute(e);
null===a?this._selection[0].removeAttribute(e):this.each(function(b,c){this.get().setAttribute(e,a)})}return this};d.prototype.trigger=function(e,a){var b;window.CustomEvent?b=new CustomEvent(e,{detail:a}):(b=document.createEvent("CustomEvent"),b.initCustomEvent(e,!0,!0,a));this.each(function(e,a){a.dispatchEvent(b)});return this};d.prototype.one=function(e,a){var b=!1;this.on(e,function(c,d){b||(b=!0,l(this).off(e,a),a.call(this,c,d))});return this};d.prototype.on=function(e,a){var b=e.match(/\S+/g)||
[];this.each(function(e,c){l.each(b,function(e,b){"body"===c.tagName.toLowerCase()&&(c=document);k(c,b,a)})});return this};d.prototype.off=function(e,a){var b=e.match(/\S+/g)||[];this.each(function(e,c){l.each(b,function(e,b){"body"===c.tagName.toLowerCase()&&(c=document);g(c,b,a)})});return this};d.prototype.reset=function(){this.each(function(e,b){a(b)});return this};d.prototype.isEmpty=function(){return 0===this._selection[0].innerHTML.replace(/\s/g,"").length};d.prototype.position=function(){return null!=
this._selection[0]?l.getPosition(this._selection[0]):{x:-1,y:-1,visible:!1}};d.prototype.css=function(e,a){var b=this;if("object"===typeof e)l.each(e,function(e,a){b.each(function(b,c){c.style[e]=a})});else{if(f.isNoU(a))return this._selection[0].style[e];b.each(function(b,c){c.style[e]=a})}return this};d.prototype.addClass=function(e){var a=e.match(/\S+/g)||[];l.each(this._selection,function(b,c){c.classList?l.each(a,function(e,a){c.classList.add(a)}):c.className+=" "+e});return this};d.prototype.hasClass=
function(e){return l.hasClass(this._selection[0],e)};d.prototype.removeClass=function(e){var a=e.match(/\S+/g)||[];l.each(this._selection,function(b,c){c.classList?l.each(a,function(e,a){c.classList.remove(a)}):c.className=c.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")});return this};d.prototype.prev=function(){return new d(this._selection[0].previousElementSibling)};d.prototype.next=function(){return new d(this._selection[0].nextElementSibling)};d.prototype.html=
function(e){if(f.isNoU(e))return this._selection[0].innerHTML;this.each(function(a,b){b.innerHTML=e});return this};d.prototype.checked=function(e){if(f.isNoU(e)){var a=this._selection[0].checked;return null!=a&&"false"!=a&&(a||"checked"==a)}this.each(function(a,b){b.checked=e});return this};d.prototype.value=function(a){if(f.isNoU(a))return this._selection[0].value;this.each(function(b,c){c.value=a});return this};d.prototype.append=function(a){"string"===typeof a?this._selection[0].innerHTML+=a:this._selection[0].appendChild(a);
return this};d.prototype.insert=function(a,b){var c=this.children().get(a);null!==c?this._selection[0].insertBefore(b,c):this._selection[0].appendChild(b);return this};d.prototype.prepend=function(a){"string"===typeof a?this._selection[0].innerHTML=a+this._selection[0].innerHTML:this._selection[0].insertBefore(a,this._selection[0].firstElementChild);return this};d.prototype.attach=function(){var a=this._selection[0];null==a.parentNode&&null!=a.__zuix_oldParent&&(l(a.__zuix_oldParent).insert(a.__zuix_oldIndex,
a),a.__zuix_oldParent=null,delete a.__zuix_oldParent,delete a.__zuix_oldIndex);return this};d.prototype.detach=function(){var a=this._selection[0],b=a.parentNode;null!=b&&(a.__zuix_oldParent=b,a.__zuix_oldIndex=Array.prototype.indexOf.call(b.children,a),b.removeChild(a),h.t("Detached from parent",b,a));return this};d.prototype.display=function(a){if(f.isNoU(a))return this._selection[0].style.display;l.each(this._selection,function(b,c){c.style.display=a});return this};d.prototype.visibility=function(a){if(f.isNoU(a))return this._selection[0].style.visibility;
l.each(this._selection,function(b,c){c.style.visibility=a});return this};d.prototype.show=function(a){return this.display(null==a?"":a)};d.prototype.hide=function(){return this.display("none")};var l=function(a){return new d(a)};l.find=function(a){return l().find(a)};l.each=function(a,b){var c=null==a?0:Object.keys(a).length;if(0<c){var d=0,g;for(g in a){var f=a[g];f instanceof Element&&(f=l(f));if(!1===b.call(f,g,a[g]))break;d++;if(d>=c)break}}return this};l.ajax=function(a){var b;b=f.isNoU(a)||
f.isNoU(a.url)?a:a.url;var c=new XMLHttpRequest;c.open("GET",b);c.onload=function(){200===c.status?f.isFunction(a.success)&&a.success(c.responseText):f.isFunction(a.error)&&a.error(c);f.isFunction(a.then)&&a.then(c)};c.send();return this};l.hasClass=function(a,b){var c=b.match(/\S+/g)||[],d=!1;l.each(c,function(b,c){if(d=a.classList?a.classList.contains(c):(new RegExp("(^| )"+c+"( |$)","gi")).test(a.className))return!1});return d};l.classExists=function(a){a=a.match(/\S+/g)||[];var b=!1;l.each(a,
function(a,e){var c=document.styleSheets;if(null!=c)for(var d=0;d<c.length;d++)try{var g=c[d].rules||c[d].cssRules;if(null!=g)for(var f=0;f<g.length;f++)if(g[f].selectorText===e){b=!0;break}}catch(h){if("SecurityError"!==h.name)throw h;}});return b};l.wrapElement=function(a,b){var c=document.createElement(a);"string"===typeof b?c.innerHTML=b:c.appendChild(b);return c};l.wrapCss=function(a,b){var c=/((.*){([^{}]|((.*){([^}]+)[}]))*})/g,d="",g;do if((g=c.exec(b))&&1<g.length){var f=g[2];if(null!=f&&
0<f.length){var m=f.split(",");l.each(m,function(b,c){d="."===c.replace(" ","")?d+("\n"+a+" "):"@"===c.trim()[0]?d+(c+" "):d+("\n"+a+"\n"+c+" ");b<m.length-1&&(d+=", ")});d+=g[1].substring(g[2].length)+"\n"}else h.w("z$.wrapCss was unable to parse rule.",f,g)}while(g);""!==d&&(b=d);return b};l.appendCss=function(a,b,c){var d=null,g;"string"===typeof a?(g=document.head||document.getElementsByTagName("head")[0],d=document.createElement("style"),d.type="text/css",d.id=c,d.styleSheet?d.styleSheet.cssText=
a:d.appendChild(document.createTextNode(a))):a instanceof Element&&(d=a);f.isNoU(b)||g.removeChild(b);f.isNoU(d)||g.appendChild(d);return d};l.replaceBraces=function(a,b){for(var c="",d=0,g=0,h=new RegExp(/[^{}]+(?=})/g),m;m=h.exec(a);){var l="{"+m[0]+"}";if("function"===typeof b){var k=b(m[0]);f.isNoU(k)||(l=k,d++)}c+=a.substr(g,m.index-g-1)+l;g=m.index+m[0].length+1}if(0<d)return c+=a.substr(g)};l.getClosest=function(a,b){for(;a&&a!==document;a=a.parentNode)if(a.matches(b))return a;return null};
l.getPosition=function(a){for(var b=l.isInView(a),c=0,d=0;a;){if("BODY"==a.tagName)var g=a.scrollTop||document.documentElement.scrollTop,c=c+(a.offsetLeft-(a.scrollLeft||document.documentElement.scrollLeft)+a.clientLeft),d=d+(a.offsetTop-g+a.clientTop);else c+=a.offsetLeft-a.scrollLeft+a.clientLeft,d+=a.offsetTop-a.scrollTop+a.clientTop;a=a.offsetParent}return{x:c,y:d,visible:b}};l.isInView=function(a,b){if(null===a.offsetParent)return!1;var c=a.getBoundingClientRect(),d=window.innerWidth||document.documentElement.clientWidth,
g=window.innerHeight||document.documentElement.clientHeight,f=0,h=0;isNaN(b)||(f=d*b-d,h=g*b-g);return c.bottom>-h&&c.right>-f&&c.left<d+f&&c.top<g+h};l.scrollTo=function(a,b,c){if(0!==b&&null!=b){null==c&&(c=500);var d=a.scrollTop+b-56;b=a.scrollTop-d;a.firstElementChild.style.transition="transform "+c+"ms ease";"undefined"!==typeof a.firstElementChild.style.WebkitTransform?a.firstElementChild.style.WebkitTransform="translate(0, "+b+"px)":"undefined"!==typeof a.firstElementChild.style.MozTransform?
a.firstElementChild.style.MozTransform="translate(0, "+b+"px)":a.firstElementChild.style.transform="translate(0, "+b+"px)";window.setTimeout(function(){"undefined"!==typeof a.firstElementChild.style.WebkitTransform?a.firstElementChild.style.WebkitTransform="":"undefined"!==typeof a.firstElementChild.style.MozTransform?a.firstElementChild.style.MozTransform="":a.firstElementChild.style.transform="";a.firstElementChild.style.transition="";a.scrollTop=d},c)}};l.ZxQuery=d;Element.prototype.matches||(Element.prototype.matches=
Element.prototype.matchesSelector||Element.prototype.mozMatchesSelector||Element.prototype.msMatchesSelector||Element.prototype.oMatchesSelector||Element.prototype.webkitMatchesSelector||function(a){a=(this.document||this.ownerDocument).querySelectorAll(a);for(var b=a.length;0<=--b&&a.item(b)!==this;);return-1<b});(function(){function a(b,c){c=c||{bubbles:!1,cancelable:!1,detail:void 0};var d=document.createEvent("CustomEvent");d.initCustomEvent(b,c.bubbles,c.cancelable,c.detail);return d}if("function"===
typeof window.CustomEvent)return!1;a.prototype=window.Event.prototype;window.CustomEvent=a})();String.prototype.hashCode=function(){var a=0,b,c;if(0===this.length)return a;for(b=0;b<this.length;b++)c=this.charCodeAt(b),a=(a<<5)-a+c,a|=0;return a};q.exports=l},{"./Logger":2,"./Util.js":4}],6:[function(n,q,u){n=n("./zuix/Zuix.js");"object"===typeof q&&q.exports?q.exports=n.call(this):this.zuix=n.call(this)},{"./zuix/Zuix.js":17}],7:[function(n,q,u){q.exports=function(b){return null}},{}],8:[function(n,
q,u){function b(a,b){this._options=null;this.contextId=null==a||null==a.contextId?null:a.contextId;this.componentId=null;this.trigger=function(a,c,g){"function"===typeof b&&b(a,c,g)};this.behavior=this._controller=this._style=this._css=this._view=this._model=this._container=null;this._eventMap=[];this._behaviorMap=[];this._c=null;this.options(a);return this}var k=n("../helpers/Logger")("ComponentContext.js"),g=n("../helpers/ZxQuery"),c=n("../helpers/Util");n("./EventCallback");b.prototype.container=
function(a){if(null==a)return this._container;a instanceof g.ZxQuery&&(a=a.get());this._container=a;return this};b.prototype.view=function(a){if("undefined"===typeof a)return this._view;a instanceof g.ZxQuery&&(a=a.get());k.t(this.componentId,"view:attach","timer:view:start");"string"===typeof a?(a={content:a},this.trigger(this,"html:parse",a),a=a.content,null!=this._container?(this._view=this._container,this._view.innerHTML+=a):(a=g.wrapElement("div",a),null!=this._view?this._view.innerHTML=a.innerHTML:
this._view=a),g(this._view).find("script").each(function(a,b){"true"!==this.attr("zuix-loaded")&&(this.attr("zuix-loaded","true"),eval.call(window,b.innerHTML))}),this.trigger(this,"view:process",g(this._view))):(a instanceof g.ZxQuery&&(a=a.get()),null!=this._container?(this._view=g.wrapElement("div",a.outerHTML).firstElementChild,this._view.removeAttribute("data-ui-view"),this._container.appendChild(this._view),this._view=this._container):this._view=a);a=g(this._view);!1===this._options.css?a.addClass("zuix-css-ignore"):
a.removeClass("zuix-css-ignore");this.modelToView();k.t(this.componentId,"view:attach","timer:view:stop");return this};b.prototype.style=function(a){if("undefined"===typeof a)return this._style;k.t(this.componentId,"view:style","timer:view:start");null==a||a instanceof Element?(this._css=a instanceof Element?a.innerText:a,this._style=g.appendCss(a,this._style,this.componentId)):"string"===typeof a&&(this._css=a,a=g.wrapCss('[data-ui-component="'+this.componentId+'"]:not(.zuix-css-ignore)',a),a={content:a},
this.trigger(this,"css:parse",a),a=a.content,this._style=g.appendCss(a,this._style,this.componentId));k.t(this.componentId,"view:style","timer:view:stop");return this};b.prototype.model=function(a){if("undefined"===typeof a)return this._model;this._model=a;this.modelToView();null!=this._c&&c.isFunction(this._c.update)&&this._c.update.call(this._c);return this};b.prototype.controller=function(a){if("undefined"===typeof a)return this._controller;this._controller=a;return this};b.prototype.options=function(a){if(null==
a)return this._options;var b=this._options=this._options||{};g.each(a,function(a,c){b[a]=c});null!=b.componentId&&(this.componentId=b.componentId);this.container(b.container);this.view(b.view);"undefined"!==typeof b.css&&this.style(b.css);this.controller(b.controller);this.model(b.model);return this};b.prototype.on=function(a,b){this._c.on(a,b);return this};b.prototype.loadCss=function(a,b){var h=this;c.isNoU(a)&&(a={});c.isNoU(a.caching)||(b=a.caching);var f=h.componentId+".css";c.isNoU(a.path)||
(f=a.path);b||(f+="?"+(new Date).getTime());g.ajax({url:f,success:function(b){h.style(b);c.isFunction(a.success)&&a.success.call(h,b)},error:function(b){k.e(b,h);c.isFunction(a.error)&&a.error.call(h,b)},then:function(){c.isFunction(a.then)&&a.then.call(h)}});return this};b.prototype.loadHtml=function(a,b){var h=this,f=h.componentId;c.isNoU(a)&&(a={});c.isNoU(a.caching)||(b=a.caching);c.isNoU(a.path)||(f=a.path);var m=g().find('[data-ui-view="'+f+'"]:not([data-ui-component*=""])');0<m.length()?(f=
m.get(0),h.view()===f||null!=h.container()&&h.container().contains(f)?h.view(f):h.view(f.outerHTML),f=h.view().innerHTML,c.isFunction(a.success)&&a.success.call(h,f),c.isFunction(a.then)&&a.then.call(h)):(m=c.isNoU(a.cext)?".html":a.cext,f==h.componentId&&(f+=m+(b?"":"?"+(new Date).getTime())),g.ajax({url:f,success:function(b){h.view(b);c.isFunction(a.success)&&a.success.call(h,b)},error:function(b){k.e(b,h);c.isFunction(a.error)&&a.error.call(h,b)},then:function(){c.isFunction(a.then)&&a.then.call(h)}}));
return this};b.prototype.viewToModel=function(){k.t(this.componentId,"view:model","timer:vm:start");var a=this;this._model={};g(this._view).find("[data-ui-field]").each(function(b,g){if(0<this.parent("pre,code").length())return!0;var f=this.attr("data-ui-field"),m=!c.isNoU(g.innerHTML)&&c.isIE()?g.cloneNode(!0):g;if(0<f.indexOf(".")){for(var f=f.split("."),l=a._model,e=0;e<f.length-1;e++)"undefined"===typeof l[f[e]]&&(l[f[e]]={}),l=l[f[e]];l[f[f.length-1]]=m}else a._model[f]=m});k.t(this.componentId,
"view:model","timer:vm:stop");return this};b.prototype.modelToView=function(){k.t(this.componentId,"model:view","timer:mv:start");if(null!=this._view&&null!=this._model){var a=this;g(this._view).find("[data-ui-field]").each(function(b,h){if(0<this.parent("pre,code").length())return!0;var f=this.attr("data-bind-to");null==f&&(f=this.attr("data-ui-field"));if("function"===typeof a._model)a._model.call(g(a._view),this,f);else{var m=c.propertyFromPath(a._model,f);if("function"===typeof m)m.call(g(a._view),
this,f);else if(null!=m)switch(h.tagName.toLowerCase()){case "img":h.src=c.isNoU(m.src)?c.isNoU(m.innerHTML)?m:m.innerHTML:m.src;m.alt&&(h.alt=m.alt);break;case "a":h.href=c.isNoU(m.href)?c.isNoU(m.innerHTML)?m:m.innerHTML:m.href;m.title&&(h.title=m.title);break;case "input":h.value=c.isNoU(m.value)?c.isNoU(m.innerHTML)?m:m.innerHTML:m.value;break;default:h.innerHTML=c.isNoU(m.innerHTML)?m:m.innerHTML}}})}k.t(this.componentId,"model:view","timer:mv:stop");return this};q.exports=b},{"../helpers/Logger":2,
"../helpers/Util":4,"../helpers/ZxQuery":5,"./EventCallback":15}],9:[function(n,q,u){function b(){}function k(a,b){null!=a&&(x=!a);null!=b&&(B=b);return!y&&!x}function g(a){null==a&&(a=document);D.indexOf(a)||D.push(a)}function c(a){for(var b=0;b<z.length;b++){var c=z[b];if(c.element===a)return c.waiting}return null}function a(a){null==a&&0<D.length&&(a=D.unshift());a instanceof t.ZxQuery&&(a=a.get());var b=c(a),b=t(a).find("[data-ui-load]:not([data-ui-loaded=true]),[data-ui-include]:not([data-ui-loaded=true])"),
b=Array.prototype.slice.call(b._selection);z.push({element:a,waiting:b});a=[];for(var d=0;d<b.length;d++){var v=parseInt(b[d].getAttribute("data-ui-priority"));isNaN(v)&&(v=0);var A=new H;A.element=b[d];A.priority=v;a.push(A)}for(d=b=0;d<a.length;d++){v=!1;for(A=0;A<w.length;A++)if(a[d].element===w[A].element){v=!0;break}v||(v=a[d].element,A=v.getAttribute("data-ui-options"),m(v,A),w.push(a[d]),b++)}r.t("componentize:count",w.length,b);(0===b||0===D.length&&0===w.length)&&E.trigger(this,"componentize:end")}
function d(){w.sort(function(a,b){return a.priority-b.priority});for(var a=null,b=0<w.length?w.shift():null;null!=b&&null!=b.element;){var c=M(b.element);k()&&c?(b.lazy=!0,b.visible=t.isInView(b.element,B)):(b.lazy=!1,b.visible=!0);if(null!=b&&null!=b.element&&b.visible){a={item:b,cancelable:b.lazy};break}if(0<w.length)b=w.shift();else break}return a}function h(b){a(b);b=d();null!=b&&J.append([b])}function f(a){var b=t(a);if("true"===b.attr("data-ui-loaded")||0<b.parent("pre,code").length())return!1;
b.attr("data-ui-loaded","true");var c=b.attr("data-ui-options");p.isNoU(c)?c={}:(c=p.propertyFromPath(window,c),c=p.cloneObject(c)||{});var v=b.attr("data-ui-context");if(!p.isNoU(v)){var d=E.context(v);null!==d&&(c=d.options());c.contextId=v}p.isNoU(c.view)&&!b.isEmpty()?(c.view=a,c.viewDeferred=!0):p.isNoU(c.view)&&p.isNoU(c.container)&&b.isEmpty()&&(c.container=a);v=b.attr("data-ui-load");p.isNoU(v)&&(v=b.attr("data-ui-include"),b.attr("data-ui-component",v),p.isNoU(c.controller)&&(c.controller=
function(){}));d=b.attr("data-bind-model");!p.isNoU(d)&&0<d.length&&(c.model=p.propertyFromPath(window,d));b=b.attr("data-ui-priority");p.isNoU(b)||(c.priority=parseInt(b));t(a).one("component:ready",function(){g(a);h(a)});E.load(v,c);return!0}function m(a,b){null==a||p.isNoU(b)||("string"===typeof b&&(b=p.propertyFromPath(window,b)),p.isNoU(b.lazyLoad)||a.setAttribute("data-ui-lazyload",b.lazyLoad.toString().toLowerCase()),p.isNoU(b.contextId)||a.setAttribute("data-ui-context",b.contextId.toString().toLowerCase()),
p.isNoU(b.componentId)||a.setAttribute("data-ui-load",b.componentId.toString().toLowerCase()))}function l(a){for(var b=0;b<I.length;b++){var c=I[b];if(c.element===a)return c}return null}function e(a){a={element:a};I.push(a);return a}function C(a){for(var b=0;b<F.length;b++){var c=F[b];if(c.element===a)return c}return null}function K(a){a={element:a};F.push(a);return a}function M(a){if("false"===a.getAttribute("data-ui-lazyload"))return!1;var b=l(a);if(null==b){var c=t.getClosest(a.parentNode,"[data-ui-lazyload=scroll],[data-ui-lazyload=true]");
if(null!=c)return b=e(a),a=C(c),null==a&&(a=K(c),"scroll"===c.getAttribute("data-ui-lazyload")&&function(a,b){var c=(new Date).getTime();t(b).on("scroll",function(){var a=(new Date).getTime();100<a-c&&(c=a,h(b))})}(this,c)),!0;if("true"===a.getAttribute("data-ui-lazyload"))return b=e(a),!0}else return!0;return!1}b.prototype.componentize=function(a,b){E.trigger(this,"componentize:begin");if(null!=b){var d=c(a);null==d?z.push({element:a,waiting:[b]}):d.push(b)}else g(a);h(a);return this};b.prototype.applyOptions=
function(a,b){m(a,b);return this};b.prototype.willLoadMore=function(){return 0<w.length||0<D.length};b.prototype.lazyLoad=function(a,b){return k(a,b)};b.prototype.dequeue=function(a){for(var b=0;b<w.length;b++)if(w[b].element===a){w.splice(b,1);break}};b.prototype.setHost=function(a){E=a;return this};q.exports=function(){return new b};var r=n("../helpers/Logger")("ComponentContext.js"),p=n("../helpers/Util"),t=n("../helpers/ZxQuery"),E=null,D=[],w=[],x=!1,B=1,I=[],F=[],y=!1;navigator&&navigator.userAgent&&
(y=(new RegExp(/bot|googlebot|crawler|spider|robot|crawling/i)).test(navigator.userAgent));y&&r.d(navigator.userAgent,"is a bot, ignoring `lazy-loading` option.");var H=function(){return{element:null,priority:0,visible:!0,lazy:!1}},J=n("./../helpers/AsynChain")({doWork:function(a,b){t(a.element).one("component:ready",function(){b()});return f(a.element)},willBreak:function(){return!1},status:function(a){switch(a){case "done":h()}}}),z=[]},{"../helpers/Logger":2,"../helpers/Util":4,"../helpers/ZxQuery":5,
"./../helpers/AsynChain":1}],10:[function(n,q,u){function b(b){var c=this;this._view=null;this.context=b;this._fieldCache=[];this.destroy=this.create=this.init=null;this._childNodes=[];this.saveView=function(){this.restoreView();this.view().children().each(function(a,b){c._childNodes.push(b)})};this.restoreView=function(){0<this._childNodes.length&&(c.view().html(""),k.each(c._childNodes,function(a,b){c.view().append(b)}),this._childNodes.length=0)};this.on=function(a,b){this.addEvent(a,b);return this};
this.mapEvent=function(a,b,c,d){null!=b&&(b.off(c,this.eventRouter),a[c]=d,b.on(c,this.eventRouter))};this.eventRouter=function(a){"function"===typeof b._behaviorMap[a.type]&&b._behaviorMap[a.type].call(c.view(),a,a.detail);"function"===typeof b._eventMap[a.type]&&b._eventMap[a.type].call(c.view(),a,a.detail)};var a=b.options(),d=null;if(null!=a.on)for(var h in a.on)d=a.on[h],c.addEvent(h,d);if(null!=a.behavior)for(var f in a.behavior)d=a.behavior[f],c.addBehavior(f,d);b.controller().call(this,this);
return this}var k=n("../helpers/ZxQuery");n("./ContextControllerHandler");b.prototype.addEvent=function(b,c){this.mapEvent(this.context._eventMap,this.view(),b,c);return this};b.prototype.addBehavior=function(b,c){this.mapEvent(this.context._behaviorMap,this.view(),b,c);return this};b.prototype.field=function(b){return null};b.prototype.clearCache=function(){this._fieldCache.length=0};b.prototype.view=function(b){if(null!=this.context.view()||this._view!==this.context.view())this.clearCache(),this._view=
k(this.context.view());if(null!=b)return this._view.find(b);if(null!==this._view)return this._view;throw{message:"Not attacched to a view yet.",source:this};};b.prototype.model=function(b){if(null==b)return this.context.model();this.context.model(b);return this};b.prototype.options=function(){return this.context.options()};b.prototype.trigger=function(b,c,a){null==this.context._eventMap[b]&&!0!==a&&this.addEvent(b,null);!0===a?(a=this.context.container(),null==a&&(a=this.context.view()),null!=a&&
k(a).trigger(b,c),this.context.trigger(this.context,b,c)):this.view().trigger(b,c);return this};b.prototype.expose=function(b,c){if("object"===typeof b){var a=this;k.each(b,function(b,c){a.context[b]=c})}else this.context[b]=c;return this};b.prototype.loadCss=function(b){this.context.loadCss(b);return this};b.prototype.loadHtml=function(b){this.saveView();this.context.loadHtml(b);return this};b.prototype.log={};b.prototype.for=function(b){return this};q.exports=b},{"../helpers/ZxQuery":5,"./ContextControllerHandler":11}],
11:[function(n,q,u){q.exports=function(b){return null}},{}],12:[function(n,q,u){q.exports=function(b){return null}},{}],13:[function(n,q,u){n("./ContextErrorCallback");n("./ContextReadyCallback");n("./EventCallback");n("./EventMapping");q.exports=function(b){return null}},{"./ContextErrorCallback":12,"./ContextReadyCallback":14,"./EventCallback":15,"./EventMapping":16}],14:[function(n,q,u){q.exports=function(b){return null}},{}],15:[function(n,q,u){q.exports=function(b){return null}},{}],16:[function(n,
q,u){q.exports=function(b){return null}},{}],17:[function(n,q,u){function b(){x.setHost(this);this._fieldCache=[];return this}function k(a,b,c){p.isNoU(c)&&(c=this);null==c._fieldCache&&(c._fieldCache={});var d=null;"undefined"===typeof c._fieldCache[a]?(d=t(b).find('[data-ui-field="'+a+'"]'),null!=d&&(c._fieldCache[a]=d)):d=c._fieldCache[a];return d}function g(a,b){var c=m(a.componentId);null!==c&&null==b.controller&&null==a.controller()&&(a.controller(c.controller),r.t(a.componentId+":js","component:cached:js"));
if(p.isNoU(b.view)){if(null!==c&&null!=c.view&&(a.view(c.view),r.t(a.componentId+":html","component:cached:html"),null!=c.view&&p.isNoU(b.css)&&(b.css=!1,c.css_applied||(c.css_applied=!0,a.style(c.css),r.t(a.componentId+":css","component:cached:css")))),p.isNoU(a.view()))return O("resource-loader").queue(a.componentId+":html",function(){y[a.componentId]=this;a.loadHtml({cext:b.cext,caching:z,success:function(d){null==c&&(c=e(a));c.view=d;delete c.controller;!1!==b.css?(y[a.componentId].step(a.componentId+
":css"),a.loadCss({caching:z,success:function(a){c.css=a},error:function(b){r.e(b,a)},then:function(){l(a,y[a.componentId])}})):l(a,y[a.componentId])},error:function(c){r.e(c,a);p.isFunction(b.error)&&a.error.call(a,c)}})},b.priority),a}else a.view(b.view);null==a.controller()?O("resource-loader").queue(a.componentId+":js",function(){y[a.componentId]=this;l(a,y[a.componentId])},F.length):l(a);return a}function c(a){if(a instanceof Element){var b=a;a=zuix.context(b);x.dequeue(b)}p.isNoU(a)||(p.isNoU(a._c)||
(p.isNoU(a._c.view())||(a._c.view().attr("data-ui-component",null),a._c.view().reset(),p.isNoU(a._c._fieldCache)||t.each(a._c._fieldCache,function(a,b){b.reset()}),a._c.view().detach()),p.isFunction(a._c.destroy)&&a._c.destroy()),a=a.container(),null!=a&&null!=a.parentNode&&a.parentNode.removeChild(a))}function a(a){a=new D(a,h);F.push(a);return a}function d(a,b){var c=null;a instanceof t.ZxQuery&&(a=a.get());t.each(F,function(b,d){if(a instanceof Element&&(d.view()===a||d.container()===a)||p.objectEquals(d.contextId,
a))return c=d,!1});if("function"===typeof b&&(a instanceof Element||a instanceof t.ZxQuery))if(null==c)t(a).one("component:ready",function(){b(zuix.context(this))});else b(c);return c}function h(a,b,c){p.isFunction(H[b])&&H[b].call(a,c)}function f(a){null!=a&&(z=a);return z}function m(a){var b=null;t.each(B,function(c,d){if(p.objectEquals(d.componentId,a))return b=d,!1});return b}function l(a,b){if("undefined"===typeof a.options().controller&&null===a.controller())if(r.d(a.componentId,"controller:load"),
p.isNoU(b)||b.step(a.componentId+":js"),p.isFunction(J[a.componentId]))a.controller(J[a.componentId]),C(a,b);else{var c=function(b){t.ajax({url:a.componentId+".js"+(z?"":"?"+(new Date).getTime()),success:function(b){try{var c=b.indexOf("function"),d=b.indexOf(".load");1<d&&d<c&&(b=b.substring(0,d-4));var e=b.indexOf(".controller");1<e&&e<c&&(b=b.substring(e+11));var A=b.indexOf("//<--controller");0<A&&(b=b.substring(0,A));b+='\n//# sourceURL="'+a.componentId+'.js"\n';a.controller(M(b))}catch(f){r.e(Error(),
f,b,a),p.isFunction(a.error)&&a.error.call(a,f)}},error:function(b){r.e(b,Error(),a);p.isFunction(a.error)&&a.error.call(a,b)},then:function(){C(a,b)}})};p.isNoU(b)?O("resource-loader").queue(a.componentId+":js",function(){c(y[a.componentId]=this)},a.options().priority):c(b)}else C(a,b)}function e(a){var b=a.view().innerHTML,b=t.wrapElement("div",b),b={componentId:a.componentId,view:b.innerHTML,css:a._css,controller:a.controller()};B.push(b);r.t(a.componentId,"bundle:added");return b}function C(a,
b){y[a.componentId]=null;if(p.isNoU(a.view()))r.e(a.componentId,"component:view:undefined");else{var c=m(a.componentId);a.options().viewDeferred||(null===c?c=e(a):null==c.controller?c.controller=a.controller():r.w(a.componentId,"component:deferred:load"));null!=b&&b.callback(function(){r.d(a.componentId,"controller:create:deferred");K(a._c)});r.d(a.componentId,"component:initializing");if(p.isFunction(a.controller())){var d=a._c=new w(a);d.log=n("../helpers/Logger")(a.contextId);"function"===typeof d.init&&
d.init();if(!p.isNoU(d.view()))if(null==d.view().attr("data-ui-component")&&d.view().attr("data-ui-component",a.componentId),p.isNoU(a.model())&&!p.isNoU(a.view())&&a.viewToModel(),d.trigger("view:apply"),a.options().viewDeferred){a.options().viewDeferred=!1;d.saveView();null===c&&(c={componentId:a.componentId,controller:a.controller()},B.push(c),r.t(a.componentId,"bundle:added"),r.d(a.componentId,"component:deferred:load"));var f=-1;!1!==a.options().css&&(null==c.css?(-1==f&&(f=0),f++,a.loadCss({caching:z,
success:function(b){null==c.css&&(c.css=b);r.d(a.componentId,"component:deferred:css",f)},then:function(){0===--f&&null!=b&&b.end()}})):a.style(c.css));!1!==a.options().html&&(null==c.view?(-1==f&&(f=0),f++,a.loadHtml({cext:a.options().cext,caching:z,success:function(b){null==c.view&&(c.view=b);r.d(a.componentId,"component:deferred:html",f)},error:function(b){r.e(b,a);p.isFunction(a.options().error)&&a.options().error.call(a,b)},then:function(){0===--f&&null!=b&&b.end()}})):a.view(c.view));-1==f&&
null!=b&&b.end()}else null!=b&&b.end();null==b&&(r.d(a.componentId,"controller:create"),K(d))}else r.w(a.componentId,"component:controller:undefined")}}function K(a){r.t(a.context.componentId,"controller:init","timer:init:start");a.field=function(b){b=k(b,a.view(),a);b.on=function(b,c,d,e){if("string"===typeof c){var f=c;c=function(){a.trigger(f,d,e)}}return t.ZxQuery.prototype.on.call(this,b,c)};return b};p.isFunction(a.create)&&a.create();a.trigger("view:create");p.isFunction(a.context.ready)&&
a.context.ready.call(a.context,a.context);a.trigger("component:ready",a.view(),!0);r.t(a.context.componentId,"controller:init","timer:init:stop");r.i(a.context.componentId,"component:loaded",a.context.contextId);if(null!=G[a.context.componentId])for(var b=G[a.context.componentId],c=G[a.context.componentId]=null;null!=b&&null!=(c=b.shift());)g(c.c,c.o)}function M(a){var b=function(a){};if("string"===typeof a)try{b=eval.call(this,a)}catch(c){r.e(this,c,a)}return b}var r=n("../helpers/Logger")("Zuix.js"),
p=n("../helpers/Util"),t=n("../helpers/ZxQuery"),E=n("../helpers/TaskQueue"),D=n("./ComponentContext"),w=n("./ContextController"),x=n("./Componentizer")();n("./ComponentCache");n("./ContextOptions");var B=[],I=0,F=[],y=[],H=[],J={},z=!0,N=[],O=function(a){p.isNoU(N[a])&&(N[a]=new E(function(a,b,c){h(a,b,c)}));return N[a]},G={};b.prototype.controller=function(a){"function"!==typeof a["for"]&&(a["for"]=function(b){return J[b]=a});return a};b.prototype.field=k;b.prototype.componentize=function(a){x.componentize(a);
return this};b.prototype.load=function(b,c){var e=null;p.isNoU(c)?(c={},e=new D(c,h)):(c.componentId=b,p.isNoU(c.contextId)?(!1===c&&(c={}),c.contextId="zuix-ctx-"+ ++I,e=a(c)):(e=d(c.contextId),null!==e?e.options(c):e=a(c)));e.componentId!=b&&(e.componentId=b);p.isFunction(c.ready)&&(e.ready=c.ready);p.isFunction(c.error)&&(e.error=c.error);if(null==y[b])return y[b]=!0,g(e,c);null==G[b]&&(G[b]=[]);G[b].push({c:e,o:c});return e};b.prototype.unload=function(a){c(a);return this};b.prototype.context=
d;b.prototype.createComponent=function(b,c){null==c&&(c={});p.isNoU(c.contextId)&&(c.contextId="zuix-ctx-"+ ++I);if(null!=d(c.contextId))throw"Context arelady exists.";c.container=document.createElement("div");c.componentId=b;x.applyOptions(c.container,c);return a(c)};b.prototype.trigger=function(a,b,c){h(a,b,c);return this};b.prototype.hook=function(a,b){p.isNoU(b)?delete H[a]:H[a]=b;return this};b.prototype.lazyLoad=function(a,b){if(null!=a)x.lazyLoad(a,b);else return x.lazyLoad();return this};
b.prototype.httpCaching=function(a){if(null!=a)f(a);else return f();return this};b.prototype.using=function(a,b,c){a=a.toLowerCase();var e=a+"-"+b.hashCode();if("component"===a)a=d(e),null==a?zuix.load(b,{contextId:e,view:"",priority:-10,ready:function(a){"function"===typeof c&&c(b,a)},error:function(){c(b,null)}}):"function"===typeof c&&c(b,a);else{var f="style"===a;if(0===t.find(a+'[id="'+e+'"]').length()){var g=document.head||document.getElementsByTagName("head")[0],h=document.createElement(a);
h.type=f?"text/css":"text/javascript";h.id=e;g.appendChild(h);var k=function(a){f?h.styleSheet?h.styleSheet.cssText=a:h.appendChild(document.createTextNode(a)):h.innerText?h.innerText=a:h.appendChild(document.createTextNode(a));c&&c(b,e)},l="_res/"+a+"/"+e;a=m(l);null!=a?k(f?a.css:a.controller):t.ajax({url:b,success:function(a){B.push({componentId:l,view:null,css:f?a:null,controller:f?null:a,using:b});k(a)},error:function(){g.removeChild(h);c&&c(b)}})}else console.log("Resource already added "+e+
"("+b+")"),c&&c(b,e)}};b.prototype.bundle=function(a,b){if(p.isNoU(a))return B;if(a&&"boolean"===typeof a){r.t("bundle:start");var c=x.lazyLoad();x.lazyLoad(!1);x.componentize();if("function"===typeof b){var d=function(a){setTimeout(function(){x.willLoadMore()?(r.t("bundle:wait"),a(a)):(r.t("bundle:end"),x.lazyLoad(c),b())},1E3)};d(d)}}else{for(d=0;d<a.length;d++)a[d].css_applied&&delete a[d].css_applied;B=a}return this};b.prototype.$=t;b.prototype.TaskQueue=E;b.prototype.ZxQuery=t.ZxQuery;b.prototype.dumpCache=
function(){return B};b.prototype.dumpContexts=function(){return F};q.exports=function(a){var c=new b;"loading"!=document.readyState?c.componentize():document.addEventListener("DOMContentLoaded",function(){c.componentize()});r.monitor(function(a,b){p.isFunction(c.monitor)&&c.monitor(a,Array.prototype.slice.call(b))});return c}},{"../helpers/Logger":2,"../helpers/TaskQueue":3,"../helpers/Util":4,"../helpers/ZxQuery":5,"./ComponentCache":7,"./ComponentContext":8,"./Componentizer":9,"./ContextController":10,
"./ContextOptions":13}]},{},[6])(6)});
//# sourceMappingURL=zuix.min.js.map
